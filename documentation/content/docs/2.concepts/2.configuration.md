---
title: Configuration
description: Understanding TestFlowKit's YAML configuration system
navigation:
  title: Configuration
---

# Configuration

TestFlowKit uses YAML configuration files to define test environments, element selectors, and execution settings. This page covers all configuration options available.

## Configuration File

By default, TestFlowKit looks for `config.yml` in the current directory. You can specify a different file:

```bash
tkit run --config my-config.yml
```

## Basic Structure

```yaml
# Active environment selection
active_environment: "local"

# Global settings
settings:
  page_load_timeout: 30000
  think_time: 100
  concurrency: 1
  report_format: "html"
  gherkin_location: "features"

# Environment configurations
environments:
  local:
    frontend_base_url: "http://localhost:3000"
    api_base_url: "http://localhost:3001"

# Frontend testing configuration
frontend:
  default_timeout: 1000
  headless: false
  screenshot_on_failure: true
  pages:
    home: "/"
  elements:
    common:
      submit_button:
        - "#submit-btn"

# Backend API testing configuration  
backend:
  default_headers:
    Content-Type: "application/json"
  endpoints:
    get_users:
      method: "GET"
      path: "/users"
```

## Environments Configuration

Define multiple environments with different URLs:

```yaml
active_environment: "local"

environments:
  local:
    frontend_base_url: "http://localhost:3000"
    api_base_url: "http://localhost:3001"
  
  staging:
    frontend_base_url: "https://staging.example.com"
    api_base_url: "https://api-staging.example.com"
  
  production:
    frontend_base_url: "https://example.com"
    api_base_url: "https://api.example.com"
```

Switch environments by changing the `active_environment` value or using CLI flags.

## Settings Configuration

Global test execution settings:

```yaml
settings:
  # Maximum wait time for page loads (ms)
  page_load_timeout: 30000
  
  # Delay between actions (ms) - useful for debugging
  think_time: 100
  
  # Enable video recording of test execution
  video_recording: false
  
  # Number of parallel test executions
  concurrency: 1
  
  # Report output format: html, json, junit
  report_format: "html"
  
  # Location of Gherkin feature files
  gherkin_location: "features"
```

## Frontend Configuration

Configure browser-based testing:

```yaml
frontend:
  # Default timeout for element interactions (ms)
  default_timeout: 1000
  
  # Run without visible browser window
  headless: false
  
  # Capture screenshots when tests fail
  screenshot_on_failure: true
  
  # Page definitions
  pages:
    home: "/"
    login: "/login"
    dashboard: "/dashboard"
    settings: "/settings/profile"
  
  # Element selectors grouped by page or feature
  elements:
    common:
      login_button:
        - "#login-btn"
        - "[data-testid='login']"
        - "button.login"
    
    login_page:
      email_input:
        - "#email"
        - "[name='email']"
      password_input:
        - "#password"
        - "[name='password']"
```

### Page Definitions

Define named pages to use in your tests:

```yaml
frontend:
  pages:
    home: "/"
    login: "/auth/login"
    register: "/auth/register"
    dashboard: "/app/dashboard"
    profile: "/app/settings/profile"
```

Use in tests:

```gherkin
Given the user goes to the "login" page
# Navigates to https://example.com/auth/login
```

### Element Selectors

Define elements with fallback selectors for robustness. Elements should be grouped by page or feature:

```yaml
frontend:
  elements:
    # Common elements used across multiple pages
    common:
      header:
        - "#main-header"
      submit_button:
        - "#submit-btn"
        - "[data-testid='submit']"
        - "button[type='submit']"
        - "xpath://button[contains(text(), 'Submit')]"
      user_menu:
        - "[data-testid='user-menu']"
        - ".user-dropdown"
    
    # Login page specific elements
    login_page:
      email_input:
        - "#email"
        - "[name='email']"
        - "input[type='email']"
      password_input:
        - "#password"
        - "[name='password']"
      login_button:
        - "#login-btn"
        - "button[type='submit']"
    
    # Form page elements
    form_page:
      text_field:
        - "xpath://*[@id='text']"
        - "#text-input"
      checkbox:
        - "#checkbox"
        - "input[type='checkbox']"
```

> ðŸ’¡ **Selector Priority:** TestFlowKit tries selectors in parallel and uses the first one that matches.

> ðŸ’¡ **Element Grouping:** Group elements by their context for better maintainability. Use `common` for elements shared across pages, or create page-specific groups matching the page names defined in your `pages` configuration (e.g., if you have a page named `login`, create a `login_page` group for its elements).

## Backend Configuration

Configure REST API testing:

```yaml
backend:
  # Default headers for all API requests
  default_headers:
    Content-Type: "application/json"
    Accept: "application/json"
    User-Agent: "TestFlowKit/1.0"
  
  # API endpoint definitions
  endpoints:
    get_users:
      method: "GET"
      path: "/users"
      description: "Retrieve all users"
    
    get_user:
      method: "GET"
      path: "/users/{id}"
      description: "Retrieve a specific user by ID"
    
    create_user:
      method: "POST"
      path: "/users"
      description: "Create a new user"
    
    update_user:
      method: "PUT"
      path: "/users/{id}"
      description: "Update an existing user"
    
    delete_user:
      method: "DELETE"
      path: "/users/{id}"
      description: "Delete a user"
```

> ðŸ’¡ **Base URL:** The API base URL is defined in the `environments` section as `api_base_url`.

### Endpoint Path Parameters

Use `{param}` syntax for path parameters:

```yaml
endpoints:
  get_post:
    method: GET
    path: "/posts/{postId}/comments/{commentId}"
```

Set parameters in tests:

```gherkin
Given I prepare a request for the "get_post" endpoint
And I set the following path parameters:
  | postId    | 123 |
  | commentId | 456 |
When I send the request
```

## GraphQL Configuration

Configure GraphQL API testing within the backend section:

```yaml
backend:
  graphql:
    # GraphQL endpoint URL
    endpoint: "https://graphqlzero.almansi.me/api"
    
    # Default headers for GraphQL requests
    default_headers:
      Content-Type: "application/json"
    
    # GraphQL operations
    operations:
      getUser:
        type: "query"
        operation: |
          query GetUser($id: ID!) {
            user(id: $id) {
              id
              username
              email
            }
          }
        description: "Fetch user by ID"
      
      createPost:
        type: "mutation"
        operation: "graphql_queries/create_post.graphql"
        description: "Create a new post"
      
      deletePost:
        type: "mutation"
        operation: |
          mutation DeletePost($id: ID!) {
            deletePost(id: $id)
          }
        description: "Delete a post"
```

> ðŸ’¡ **Operation Types:** Specify whether each operation is a `query` or `mutation`.

> ðŸ’¡ **Inline vs File:** Operations can be defined inline using the `|` multiline syntax, or reference external `.graphql` files.

## Files Configuration

Configure file paths for file upload testing:

```yaml
files:
  # Base directory for test files
  base_directory: "./test-files"
  
  # Named file definitions
  definitions:
    avatar_image: "images/avatar.png"
    gallery_image1: "images/gallery/image1.jpg"
    gallery_image2: "images/gallery/image2.jpg"
    test_document: "documents/test.pdf"
    sample_csv: "data/sample.csv"
```

Use in tests:

```gherkin
When I upload the "avatar_image" file to the "avatar_field" field
And I upload the following files to the "gallery_field" field:
  | gallery_image1 |
  | gallery_image2 |
```

## Switching Environments

Switch between environments by changing the `active_environment` setting:

```yaml
# Use local environment
active_environment: "local"

# Or use staging
active_environment: "staging"
```

Or use CLI flags to override:

```bash
tkit run --env staging
```

## Complete Example

```yaml
active_environment: "local"

settings:
  page_load_timeout: 30000
  think_time: 100
  video_recording: false
  concurrency: 1
  report_format: "html"
  gherkin_location: "features"

environments:
  local:
    frontend_base_url: "http://localhost:3000"
    api_base_url: "http://localhost:3001"
  
  staging:
    frontend_base_url: "https://staging.example.com"
    api_base_url: "https://api-staging.example.com"
  
  production:
    frontend_base_url: "https://example.com"
    api_base_url: "https://api.example.com"

frontend:
  default_timeout: 1000
  headless: false
  screenshot_on_failure: true
  
  pages:
    home: "/"
    login: "/login"
    register: "/register"
    dashboard: "/dashboard"
    profile: "/settings/profile"
  
  elements:
    common:
      nav_home:
        - "[data-testid='nav-home']"
      nav_dashboard:
        - "[data-testid='nav-dashboard']"
      user_menu:
        - "[data-testid='user-menu']"
        - "#user-dropdown"
    
    login_page:
      email_input:
        - "#email"
        - "[name='email']"
        - "input[type='email']"
      password_input:
        - "#password"
        - "[name='password']"
      login_button:
        - "#login-btn"
        - "button[type='submit']"
    
    messages:
      error_message:
        - ".alert-error"
      success_message:
        - ".alert-success"

backend:
  default_headers:
    Content-Type: "application/json"
    Accept: "application/json"
  
  endpoints:
    login:
      method: "POST"
      path: "/auth/login"
      description: "Authenticate user"
    get_profile:
      method: "GET"
      path: "/users/me"
      description: "Get current user profile"
    update_profile:
      method: "PUT"
      path: "/users/{id}"
      description: "Update user profile"
  
  graphql:
    endpoint: "https://api.example.com/graphql"
    default_headers:
      Content-Type: "application/json"
    operations:
      getUser:
        type: "query"
        operation: |
          query GetUser($id: ID!) {
            user(id: $id) {
              id
              username
              email
            }
          }
        description: "Fetch user by ID"

files:
  base_directory: "./test-files"
  definitions:
    avatar_image: "images/avatar.png"
    test_document: "documents/test.pdf"
    sample_data: "data/sample.csv"
```

## Next Steps

- [Selectors](/docs/concepts/selectors) â€” Deep dive into element selectors
- [Variables](/docs/features/variables) â€” Use dynamic data in tests
- [CLI Reference](/docs/reference/cli) â€” Command line options
